<html>

<head>
    <!-- Some meta data -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" charset="UTF-8" />
    <link rel="icon" href="./images/logo.ico" />
    <title>Projet Web3D - Zoo</title>

    <!--Import some custom css -->
    <link rel="stylesheet" href="css/general.css" />

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Add icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Add X3DOM library -->
    <script type='text/javascript' src='../X3DOM/x3dom.js'> </script>
    <link rel='stylesheet' type='text/css' href='../X3DOM/x3dom.css' />

    <!-- Add JQuery library -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>

    <script type="text/javascript">
        // We set-up some javascript UI 
        $(document).ready(function ()) {
            $(".dropdown-button").dropdown()
        });
    </script>
</head>

<body>
    <!--Navbar -->
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="maison.html" class="brand-logo center">Web 3D</a>
                <ul id="nav-mobile" class="left hide-on-med-and-down">
                    <li><a href="sujet.html">Sujet</a></li>
                    <li><a href="maison.html">Maison</a></li>
                    <li><a href="zoo.html">Zoo</a></li>
                    <li><a href="test.html">Test</a></li>
                    <li><a href="test2.html">Test2</a></li>
                </ul>
                <ul class="right">
                    <!-- Dropdown Trigger -->
                    <li>
                        <a id="navbar-dropdown-trigger" class="dropdown-button"
                            data-activates="navbar-dropdown">Navigation
                            mode
                            <i class="material-icons right">arrow_drop_down</i>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- Navbar's Dropdown Structure -->
    <ul id="navbar-dropdown" class="dropdown-content">
        <li><a onclick="setNavigationMode('examine')"><i class="material-icons">visibility</i>examine</a></li>
        <li><a onclick="setNavigationMode('walk')"><i class="material-icons">directions_walk</i>walk</a></li>
        <li><a onclick="setNavigationMode('fly')"><i class="material-icons">flight</i>fly</a></li>
        <li><a onclick="setNavigationMode('look-at')"><i class="material-icons">zoom_out_map</i>look-at</a></li>
        <li><a onclick="setNavigationMode('look-around')"><i
                    class="material-icons">youtube_searched_for</i>look-around</a></li>
        <li><a onclick="setNavigationMode('turntable')"><i class="material-icons">keyboard_return</i>turntable</a></li>
        <li><a onclick="setNavigationMode('game')"><i class="material-icons">gamepad</i>game</a></li>
    </ul>

    <!-- Stuff that is at the bottom left of the screen -->
    <div class="fixed-box">
        <!-- Additional informations -->
        <p>Sélection : <label id="selected"></label> </p>
        <p>Détails : <label id="details"></label> </p>
        <p>Lieu : <label id="room"></label> </p>
    </div>

    <!-- Image of the map -->
    <div>
        <img id="map" src="images/plan.png" width="25%" heigh="25%" alt="my_plan" usemap="#map">
    </div>

    <!-- Adding interaction to the map -->
    <map name="map">
        <area shape="rect" coords="115,125,253,270" onclick="room('livingRoom')" />
        <area shape="rect" coords="15,115,110,213" onclick="room('bedroom')" />
        <area shape="rect" coords="250,180,345,260" onclick="room('garage')" />
        <area shape="rect" coords="45,214,110,280" onclick="room('bathroom')" />
        <area shape="rect" coords="115,5,253,123" onclick="room('garden')" />
    </map>

    <!-- Lots of 3D objects -->
    <x3d id='x3dcontext' showStat='false' showLog='false'
        style='width:100%; height:100%; border:0; margin:0; padding:0;'>
        <Scene>
            <!-- Navigation Info  -->
            <navigationInfo type="examine" id="navType"></navigationInfo>

            <!-- Default viewpoint  -->
            <Viewpoint position="-9.21913 7.93343 34.74036" orientation="-0.98321 0.18173 -0.01647 0.11077" 
                zNear="1.58146" zFar="46.40617" centerOfRotation="0.00000 0.00000 0.00000" fieldOfView="0.78540" 
                description="defaultX3DViewpointNode"></Viewpoint>

            <!-- 3D elements  -->
            <!-- platform and grass  -->
            <transform translation='-10 0 0'>
                <shape>
                    <appearance>
                        <material diffuseColor='.5 .5 .5'></material>
                    </appearance>
                    <box size='1 2 3'></box>
                </shape>
            </transform>

            <Transform translation='-5 -2 0' scale=".02 .02 .02">
                <inline nameSpaceName="Grass" mapDEFToID="true"
                    url='models/Grass/scene.gltf' />
            </Transform>

            <!-- people  -->
            <Transform scale="0.25 0.25 0.25">
                <inline nameSpaceName="Human" mapDEFToID="true"
                    url='models/Human/Human.gltf' />
            </Transform>
            <!-- animals  -->
        </Scene>
    </x3d>

    <script>
        /**
         * Sets the new Navigation Mode of the 3D scene
         * @param {String} newNavigationMode
         */
        function setNavigationMode(newNavigationMode) {
            document.getElementById('navType').type = newNavigationMode
        }

        // Data of many objects
        const data = {
            'fruit': {
                'selected': 'Fruits',
                'details': 'Un fruit est un aliment végétal, à la saveur sucrée, généralement consommé cru',
                'room': 'Cuisine',
            },
            'default': {
                'selected': 'X',
                'details': 'Y',
                'room': 'Z',
            }
        }

        /**
         * Sets the info of a given element that has been clicked
         * @param {String} element
         */
        function getInfo(element) {
            // Display a message in the console
            console.log('Clicked on element : ', element)

            // If the element is found
            if (data[element] !== undefined) {
                document.getElementById('selected').innerHTML = data[element].selected
                document.getElementById('details').innerHTML = data[element].details
                document.getElementById('room').innerHTML = data[element].room
            }
        }

        /**
         * Sets data about a room that has been clicked
         * @param {String} room
         */
        function room(room) {
            // Display a message in the console
            console.log('Clicked on room : ', room)

            // If the element is found
            if (document.getElementById(room) !== undefined) {
                document.getElementById(room).setAttribute('set_bind', 'true')
            }
        }
    </script>
</body>

</html>